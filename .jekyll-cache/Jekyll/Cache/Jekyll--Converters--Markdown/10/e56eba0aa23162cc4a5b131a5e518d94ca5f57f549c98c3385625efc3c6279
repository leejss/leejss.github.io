I"&<h2 id="mongodb-data">Mongodb data</h2>

<h3 id="document">document</h3>

<p>mongodbì˜ ê¸°ë³¸ì ì¸ ë°ì´í„° ë‹¨ìœ„ëŠ” documentë‹¤. RBMSì˜ rowë¼ê³  ë³´ë©´ ëœë‹¤.</p>

<p>{â€œkeyâ€: value}ì˜ í˜•ì‹ì„ ê°€ì§€ê³  ìˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì™€ ìœ ì‚¬í•˜ë‹¤.</p>

<p>documentì˜ keyì˜ íƒ€ì…ì€ stringì´ê¸° ë•Œë¬¸ì— â€œ â€œë¡œ ê°ì‹¸ì¤˜ì•¼ í•œë‹¤.</p>

<p>{â€œappleâ€: â€œ1â€}ê³¼ {â€œappleâ€: 1}ì€ ì„œë¡œ ë‹¤ë¥¸ documentì´ë©°(Type-sensitive)</p>

<p>{â€œAppleâ€: 1}ê³¼ {â€œappleâ€: 1}ì€ ì„œë¡œ ë‹¤ë¥´ë‹¤.(Case-sensitive)</p>

<h3 id="collection">collection</h3>

<p>documentì„ ëª¨ì€ ê²ƒì´ collectionì´ë‹¤. RDBMSì˜ tableì´ë¼ê³  ë³´ë©´ ëœë‹¤.</p>

<h2 id="mongodb-crud">Mongodb CRUD</h2>

<p>ëª½ê³ ë””ë¹„ì—ì„œ ì‚¬ìš©í•˜ëŠ” CRUD methodsë¥¼ ë¨¼ì € ê°„ëµíˆ ì •ë¦¬í•œë‹¤.</p>

<h3 id="create">Create</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- db.collection.insert()
- db.collection.batchInsert()
</code></pre></div></div>

<h3 id="readquery">Read(query)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- db.collection.find()
</code></pre></div></div>

<h3 id="update">Update</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- db.collection.update()
</code></pre></div></div>

<h3 id="delete">Delete</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- db.collection.remove()
- db.collection.drop()
</code></pre></div></div>

<h2 id="create-method">CREATE method</h2>

<h2 id="read-method">Read method</h2>

<h2 id="update-method">Update method</h2>

<h2 id="delete-method">Delete method</h2>

<p>Inserting or saving</p>

<p>insert({})</p>

<p>batchInsert([{}])</p>

<p>Removing</p>

<p>remove all documents
    remove()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>query document 
remove(query document)

drop()
</code></pre></div></div>

<p>Updating</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>update(query document ì—…ë°ì´íŠ¸ ëŒ€ìƒì´ ë  document, modifier document )

conflicting updates

replacing

unique qeury document ì´ìš©

Using modifier: to update specific fields. update modifier
complex update operations 

$inc: increment  
$set: setting the value 
    update(ì¿¼ë¦¬, {$set: {field: value}})
$unset: removing specific field 
    update(ì¿¼ë¦¬, {$unset: {key: 1}})

Array modifier

$push: adding element to the end of an array. ë°°ì—´ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìƒˆë¡œìš´ ë°°ì—´ì„ ìƒì„±
    update(ì¿¼ë¦¬, {$push: {ë°°ì—´: {í‘¸ì‰¬ ëŒ€ìƒ} }})

$each: iterate ë°°ì—´ 
$push with $each
    update(ì¿¼ë¦¬, {$psuh: {field: {$each: [ê°’1, ê°’2, ê°’3]}}})

$slice: 
$addToSet: prevent duplicates

$pop
    {"$pop": {"key": 1}} remove end of array
    {"$pop": {"key": -1}} remove beginning

$pull: pop by criteria
    {"$pull": {"key": value}}
</code></pre></div></div>

<p>upsert: update + insert
    ì¿¼ë¦¬ì— ë§ëŠ” documentê°€ ì—†ë‹¤ë©´ ìƒˆë¡œìš´ documentë¥¼ ìƒì„±</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>update(ì¿¼ë¦¬, replace, upsert_flag)
ì„¸ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì •í•  ìˆ˜ ìˆë‹¤.

$setOnInsert


save()
</code></pre></div></div>

<p>Querying
    find() : all document
    find(ì¿¼ë¦¬1, ì¿¼ë¦¬2)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>íŠ¹ì • í•„ë“œë§Œ ë³´ê³  ì‹¶ì€ ê²½ìš°
second parameter of find()
find({}, {"key1": 1, "key2": 1})

íŠ¹ì • í•„ë“œë¥¼ ì œì™¸í•œ ê²½ìš°ë§Œ ë³´ê³  ì‹¶ì€ ê²½ìš°


conditional 
    $lt
    $lte
    $gt
    $gte

    $ne

    $in
    $or

query array

    $all
    $size
</code></pre></div></div>

:ET